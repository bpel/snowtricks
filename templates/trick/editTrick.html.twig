{% extends 'base.html.twig' %}

{% form_theme form _self %}

{% block body %}

    <div class="my-3 my-md-5">

        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="card form-card">
                        <div class="card-body">
                            <h3 class="card-title">Informations sur la figure #{{ trick.id }}</h3>

                            {{ form_start(form) }}
                            {{ form_widget(form) }}
                            {{ form_widget(form.illustrations) }}
                            {{ form_widget(form.videos) }}
                            {{ form_end(form) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% block script %}

        <script>
            $('#add-illustration').click(function () {
                const index = $('#trick_illustrations div.form-group').length;

                const tmpl = $('#trick_illustrations').data('prototype').replace(/__name__/g, index);

                $('#trick_illustrations').append(tmpl);
            })

            $('#add-video').click(function () {
                const index1 = $('#trick_videos div.form-group').length;
                console.log(index1);
                const tmpl1 = $('#trick_videos').data('prototype').replace(/__name__/g, index1);

                $('#trick_videos').append(tmpl1);
            })
        </script>

    {% endblock %}

{% endblock %}

{% block _trick_illustrations_widget %}
    <button type="button" class="btn btn-primary btn-form-edit-add-element" id="add-illustration">Ajouter une illustration</button>
    <div class="table-responsive">
        <table class="table card-table table-vcenter text-nowrap datatable">
            <thead>
            <tr>
                <th class="w-1">#</th>
                <th>Illustration</th>
                <th>Fichier</th>
                <th>Selectionner nouveau fichier</th>
                <th>Supprimer</th>
            </tr>
            </thead>
            <tbody>
            {{ form_widget(form) }}
            </tbody>
        </table>
    </div>
{% endblock %}

{% block _trick_videos_widget %}
    <button type="button" class="btn btn-primary btn-form-edit-add-element" id="add-video">Ajouter une vidéo</button>
    <div class="table-responsive">
        <table class="table card-table table-vcenter text-nowrap datatable">
            <thead>
            <tr>
                <th class="w-1">#</th>
                <th>Vidéo</th>
                <th>Url actuel</th>
                <th>Modifier URL</th>
                <th>Supprimer</th>
            </tr>
            </thead>
            <tbody>
            {{ form_widget(form) }}
            </tbody>
        </table>
    </div>
{% endblock %}

{% block _trick_illustrations_entry_widget %}
    <tr>
        <td><span class="text-muted">{{ form.vars.name }}</span></td>
        <td><img class="img-edit-trick-table" src="{{ asset("build/img/")}}{{ form.vars.value.filename|default('No_Image_Available.jpg') }}" alt="IMG_TRICK"></td>
        <td>{{ form.vars.value.filename|default("") }}</td>
        <td>{{ form_widget(form.file) }}</td>
        <td><button class="btn btn-outline-danger btn-sm delete-button-trick" value="24"><span class="fas fa-trash"></span></button></td>
    </tr>
    {% endblock %}

{% block _trick_videos_entry_widget %}
    <tr>
        <td><span class="text-muted">{{ form.vars.name }}</span></td>
        <td>embed</td>
        <td>{{ form.vars.value.url|default("") }}</td>
        <td>{{ form_widget(form.url) }}</td>
        <td><button class="btn btn-outline-danger btn-sm delete-button-trick" value="24"><span class="fas fa-trash"></span></button></td>
    </tr>
{% endblock %}

{% block _trick_illustrations_entry_row %}
    {{ form_widget(form) }}
{% endblock %}

{% block _trick_videos_entry_row %}
    {{ form_widget(form) }}
{% endblock %}