{% extends 'base.html.twig' %}

{% form_theme form _self %}

{% block body %}

    <div class="my-3 my-md-5">

        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="card form-card">
                        <div class="card-body">
                            <h3 class="card-title">Informations sur la figure #{{ trick.id }}</h3>

                            {{ form_start(form) }}

                            {% if form_errors(form) %}
                                <div class="alert alert-icon alert-danger" role="alert">
                                    <i class="fe fe-alert-triangle mr-2" aria-hidden="true"></i>
                                    {{ form_errors(form) }}
                                </div>
                            {% endif %}

                            {{ form_label(form.nametrick, 'Nom') }}
                            {{ form_widget(form.nametrick) }}

                            {{ form_label(form.typetrick, 'Type') }}
                            {{ form_widget(form.typetrick) }}

                            {{ form_label(form.description, 'Description') }}
                            {{ form_widget(form.description) }}

                        </div>
                    </div>

                    <div class="card form-card">
                        <div class="card-body">
                                <h3 class="card-title">Illustrations</h3>
                            <div class="container">
                                {% if trick.illustrations is empty %}
                                <div class="alert alert-icon alert-primary" role="alert">
                                    <i class="fe fe-info mr-2" aria-hidden="true"></i> Aucune illustration à afficher
                                </div>
                                {% endif %}

                                {{ form_widget(form.illustrations) }}
                            </div>
                        </div>
                    </div>

                    <div class="card form-card">
                        <div class="card-body">
                            <h3 class="card-title">Vidéos</h3>
                            <div class="container">
                                {% if trick.videos is empty %}
                                    <div class="alert alert-icon alert-primary" role="alert">
                                        <i class="fe fe-info mr-2" aria-hidden="true"></i> Aucune vidéo à afficher
                                    </div>
                                {% endif %}

                                {{ form_widget(form.videos) }}
                            </div>
                            {{ form_widget(form.save) }}
                            {{ form_end(form) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}


{% block _trick_illustrations_widget %}
    {{ form_widget(form) }}
{% endblock %}

{% block _trick_videos_widget %}
    {{ form_widget(form) }}
{% endblock %}

{% block _trick_illustrations_entry_widget %}
    <div class="col-md-3">
        <div class="card">
            <div class="form-group">
                <img class="card-img-top card-img-snowtricks" src="{{ asset("build/img/")}}{{ form.vars.value.filename|default('No_Image_Available.jpg') }}" alt="IMG_TRICK">
            </div>
            <div class="card-body d-flex flex-column">
                <label>Illustration {{ form.vars.name }}</label>
                {{ form_widget(form.file) }}
            </div>
        </div>
    </div>
{% endblock %}

{% block _trick_videos_entry_widget %}
    <div class="col-md-3">
        <div class="card">
            <div class="form-group">
                <iframe width="100%" height="175px" src="{{ form.vars.value.url|default('') }}"></iframe>
            </div>
            <div class="card-body d-flex flex-column">
                <label>Vidéo {{ form.vars.name }}</label>
                {{ form_widget(form.url) }}
            </div>
        </div>
    </div>
{% endblock %}

{% block _trick_illustrations_entry_row %}
    {{ form_widget(form) }}
{% endblock %}

{% block _trick_videos_entry_row %}
    {{ form_widget(form) }}
{% endblock %}


{% block form_widget_simple %}
    <div class="form-group">
        {% set type = type|default('text') %}
        <input class="form-control" type="{{ type }}" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
    </div>
{% endblock form_widget_simple %}

{%- block choice_widget_collapsed -%}
    <div class="form-group">
    {%- if required and placeholder is none and not placeholder_in_choices and not multiple and (attr.size is not defined or attr.size <= 1) -%}
        {% set required = false %}
    {%- endif -%}
    <select class="form-control custom-select selectized" {{ block('widget_attributes') }}{% if multiple %} multiple="multiple"{% endif %}>
        {%- if placeholder is not none -%}
            <option value=""{% if required and value is empty %} selected="selected"{% endif %}>{{ placeholder != '' ? (translation_domain is same as(false) ? placeholder : placeholder|trans({}, translation_domain)) }}</option>
        {%- endif -%}
        {%- if preferred_choices|length > 0 -%}
            {% set options = preferred_choices %}
            {{- block('choice_widget_options') -}}
            {%- if choices|length > 0 and separator is not none -%}
                <option disabled="disabled">{{ separator }}</option>
            {%- endif -%}
        {%- endif -%}
        {%- set options = choices -%}
        {{- block('choice_widget_options') -}}
    </select>
    </div>
{%- endblock choice_widget_collapsed -%}

{%- block textarea_widget -%}
    <div class="form-group">
    <textarea rows="3" class="form-control" {{ block('widget_attributes') }}>{{ value }}</textarea>
    </div>
{%- endblock textarea_widget -%}

{%- block form_label -%}
    <b>
    {% if label is not same as(false) -%}
        {% if not compound -%}
            {% set label_attr = label_attr|merge({'for': id}) %}
        {%- endif -%}
        {% if required -%}
            {% set label_attr = label_attr|merge({'class': (label_attr.class|default('') ~ ' required')|trim}) %}
        {%- endif -%}
        {% if label is empty -%}
            {%- if label_format is not empty -%}
                {% set label = label_format|replace({
                    '%name%': name,
                    '%id%': id,
                }) %}
            {%- else -%}
                {% set label = name|humanize %}
            {%- endif -%}
        {%- endif -%}
        <{{ element|default('label') }}{% if label_attr %}{% with { attr: label_attr } %}{{ block('attributes') }}{% endwith %}{% endif %}>
        {%- if translation_domain is same as(false) -%}
            {{- label -}}
        {%- else -%}
            {{- label|trans(label_translation_parameters, translation_domain) -}}
        {%- endif -%}
        </{{ element|default('label') }}>
    {%- endif -%}
    </b>
{%- endblock form_label -%}

{%- block button_widget -%}
    {%- if label is empty -%}
        {%- if label_format is not empty -%}
            {% set label = label_format|replace({
                '%name%': name,
                '%id%': id,
            }) %}
        {%- elseif label is same as(false) -%}
            {% set translation_domain = false %}
        {%- else -%}
            {% set label = name|humanize %}
        {%- endif -%}
    {%- endif -%}
    <button class="btn btn-primary" type="{{ type|default('button') }}" {{ block('button_attributes') }}>{{ translation_domain is same as(false) ? label : label|trans(label_translation_parameters, translation_domain) }}</button>
{%- endblock button_widget -%}